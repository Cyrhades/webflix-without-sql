doctype html
html(lang="fr")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title Webflix
        link(href="/styles/style.css", rel="stylesheet")
        link(href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css", rel="stylesheet")
    body(class="bg-gray-100")
        header(class="bg-red-600 text-white py-4")
            h1(class="text-4xl text-center") Bienvenue sur WebFlix!

        main(class="container mx-auto mt-8")            

            h2(class="text-2xl mt-8") Votre recherche
            form(action="/search" method="get" class="mt-4")
                p
                    input(type="search" name="q" value=keyword class="border border-gray-300 p-2 rounded-md focus:outline-none focus:ring focus:border-blue-500 w-full")
                p.flex.justify-center
                    button(type="submit" class="mt-2 px-4 py-2 bg-red-600 text-white rounded-md") Rechercher

            if keyword 
                section(class="m-20 grid grid-cols-1 md:grid-cols-1 gap-4")
                    div(class="p-4 bg-white shadow-md")
                        h2(class="text-2xl mb-4") Résultat de recherche                        
                        if movies.length > 0
                            p  Voici les résultats pour votre recherche "<strong>#{keyword}</strong>"

                            ul#resultMovies.grid.grid-cols-4.gap-4
                                each movie in movies
                                    if movie.poster_path
                                        li(class="relative flex flex-col items-center border rounded-lg overflow-hidden shadow-md hover:shadow-lg")                                           
                                            .content_tmdb.py-4.text-center
                                                h3.title.text-lg.font-semibold.mt-2.mb-1.truncate.w-full.text-center.text-gray-900 #{movie.title}
                                            a.block.text-center(href="/movie/"+movie.tmdb_id)
                                                img.mb-2(src="https://image.tmdb.org/t/p/w500/"+movie.poster_path, alt=movie.title, width="120")
                                                span.release.text-center.text-sm.text-gray-600 #{movie.release_date}
                                                span.notation.mb-4.text-center.text-gray-700.font-bold.block.mt-2 #{movie.vote_average}
                        else 
                            .bg-blue-200.px-4.py-2.rounded-md.border.border-blue-400 Votre recherche "<strong>#{keyword}</strong>" n'a donnée aucun résultat

        footer(class="fixed mt-8 bottom-0 left-0 w-full bg-gray-500 text-white py-4 text-center")
            p Copyright © 2023 - WebFlix

        script(src="/js/movies.js")
        script(src=process.env.BROWSER_REFRESH_URL)
